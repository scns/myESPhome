name: YAML lint

on:
  push:
    branches: [main]
    paths:
      - "**.yaml"
      - "**.yml"
  pull_request:
    paths:
      - "**.yaml"
      - "**.yml"

jobs:
  yamllint:
    name: ðŸ§¹ yamllint
    runs-on: ubuntu-latest
    steps:
      - name: â¤µï¸ Check out configuration from GitHub
        uses: actions/checkout@v4.2.2
      - name: ðŸ“¥ Install yamllint
        run: |
          python -m pip install --upgrade pip
          pip install yamllint==1.33.0

      - name: âœï¸ Create yamllint config
        run: |
          cat > .yamllint << 'EOF'
          extends: default
          rules:
            document-start: disable
            line-length:
              max: 120
          EOF

      - name: ðŸš€ Run yamllint
        run: |
          yamllint --strict . || {
            echo "::error::YAML linting failed. Please fix the above issues."
            exit 1
          }
